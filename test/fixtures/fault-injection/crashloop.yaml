# Triggers: PodCrashLoop detector
# A pod that exits immediately with code 1, entering CrashLoopBackOff
# after a few restarts. The detector fires when restartCount > 3.
apiVersion: v1
kind: Pod
metadata:
  name: fault-crashloop
  namespace: default
  labels:
    app: wormsign-fault-test
    fault-type: crashloop
spec:
  restartPolicy: Always
  containers:
    - name: crash
      image: busybox:1.36
      command: ["sh", "-c", "echo 'application error: config not found' >&2; exit 1"]
      resources:
        requests:
          cpu: 10m
          memory: 8Mi
        limits:
          cpu: 50m
          memory: 16Mi
